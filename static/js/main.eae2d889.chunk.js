(this["webpackJsonpasset-portfolio"]=this["webpackJsonpasset-portfolio"]||[]).push([[0],{36:function(e,t,a){e.exports=a(73)},41:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(34),s=a.n(o),i=(a(41),a(2)),l=a.n(i),c=a(9),u=a(5),p=a(6),h=a(1),m=a(8),d=a(7),f=(a(43),a(15)),b=(a(44),a(16)),g=a.n(b),v=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={id:n.props.id,ticker:"",quantity:0,priceBoughtAt:0,price:0,value:0,editMode:!1},n.processEdit=n.processEdit.bind(Object(h.a)(n)),n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.processDelete=n.processDelete.bind(Object(h.a)(n)),n.submit=n.submit.bind(Object(h.a)(n)),n.cancel=n.cancel.bind(Object(h.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.price*this.props.quantity,t=this.props.price,a=this.props.priceBoughtAt;this.setState({id:this.props.id,ticker:this.props.ticker,quantity:this.props.quantity,priceBoughtAt:a,price:t,value:e})}},{key:"processEdit",value:function(){this.setState({editMode:!this.state.editMode})}},{key:"processDelete",value:function(){this.props.handleDelete(this.props.id)}},{key:"submit",value:function(e){e.preventDefault();var t=this.state.quantity*this.state.price;this.setState({editMode:!this.state.editMode,value:t}),this.props.handleEdit(this.state.ticker,this.state.quantity,this.state.priceBoughtAt)}},{key:"cancel",value:function(){this.setState({editMode:!this.state.editMode});var e=this.props.price*this.props.quantity,t=this.props.price,a=this.props.priceBoughtAt;this.setState({ticker:this.props.ticker,quantity:this.props.quantity,priceBoughtAt:a,price:t,value:e})}},{key:"handleChange",value:function(e){e.preventDefault(),this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e,t,a,n,o=r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.submit},r.a.createElement("input",{name:"quantity",className:"PortfolioTab-editBox",type:"number",max:1e8,min:1,value:this.state.quantity,onChange:this.handleChange}),r.a.createElement("input",{name:"priceBoughtAt",className:"PortfolioTab-editBox",type:"number",max:1e8,min:0,value:this.state.priceBoughtAt,onChange:this.handleChange}),r.a.createElement("button",{className:"PortfolioTab-submit PortfolioTab-btns",type:"submit"},"Save"),r.a.createElement("button",{className:"PortfolioTab-cancel PortfolioTab-btns",onClick:this.cancel},"Cancel"))),s=r.a.createElement("div",{className:"PortfolioTab-btns"},r.a.createElement("button",{className:"PortfolioTab-edit",onClick:this.processEdit},r.a.createElement("i",{className:"fa fa-bars"})),r.a.createElement("button",{className:"PortfolioTab-delete",onClick:this.processDelete},r.a.createElement("i",{className:"fa fa-trash"})));return e=this.state.price,t=this.state.priceBoughtAt,a=this.state.value,e=e.toFixed(2),a=a.toFixed(2),e=g()(e),a=g()(a),t=g()(t),n=(n=(this.state.price-this.state.priceBoughtAt)*this.state.quantity).toFixed(2),r.a.createElement("div",{className:"Portfolio-tab"},r.a.createElement("p",null,this.state.ticker),this.state.editMode?o:r.a.createElement("p",null,"Quantity: ",this.state.quantity),r.a.createElement("p",null,"Current Price: ","$".concat(e)),r.a.createElement("p",null,"Aquisition Cost: ","$".concat(t)),r.a.createElement("p",null,"Total Value: ","$".concat(a)),r.a.createElement("p",{className:n<0?"red":"green"},"+/- ","$".concat(g()(Math.abs(n)))),this.state.editMode?"":s)}}]),a}(n.Component),E=(a(45),["AAPL","AXP","BA","CAT","CSCO","CVX","DIS","DWDP","GE","GS","HD","IBM","INTC","JNJ","JPM","KO","MCD","MMM","MRK","MSFT","NKE","PFE","PG","TRV","UNH","UTX","V","VZ","WMT","XOM"]),k=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={ticker:"MRK",quantity:1,priceBoughtAt:0},n.onValueChange=n.onValueChange.bind(Object(h.a)(n)),n.submitForm=n.submitForm.bind(Object(h.a)(n)),n}return Object(p.a)(a,[{key:"submitForm",value:function(e){e.preventDefault();var t=this.state.ticker;E.includes(t)?this.props.handleAdd(t,this.state.quantity,this.state.priceBoughtAt):alert("This ticker is not available please enter one from this list:\n\n https://product.intrinio.com/developer-sandbox/coverage/us-fundamentals-financials-metrics-ratios-stock-prices\n\n For example try: 'MRK'")}},{key:"onValueChange",value:function(e){this.setState(Object(f.a)({},e.target.name,"ticker"===e.target.name?e.target.value.toUpperCase():e.target.value))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Portfolio-form"},r.a.createElement("a",{href:"https://product.intrinio.com/developer-sandbox/coverage/us-fundamentals-financials-metrics-ratios-stock-prices"},"Available assets?"),r.a.createElement("form",{onSubmit:this.submitForm},r.a.createElement("h4",{id:"title"},"Add New Assets"),r.a.createElement("label",{htmlFor:"ticker"}),r.a.createElement("p",{className:"PortfolioForm-text"},"Ticker"),r.a.createElement("input",{className:"Portfolio-form-ticker-input",type:"text",name:"ticker",value:this.state.ticker,onChange:this.onValueChange}),r.a.createElement("p",{className:"PortfolioForm-text"},"Quantity"),r.a.createElement("label",{htmlFor:"quantity"}),r.a.createElement("input",{className:"Portfolio-form-quantity-input",type:"number",name:"quantity",min:1,max:1e9,value:this.state.quantity,onChange:this.onValueChange}),r.a.createElement("p",{className:"PortfolioForm-text"},"Aquisition Cost"),r.a.createElement("label",{htmlFor:"priceBoughtAt"}),r.a.createElement("input",{className:"Portfolio-form-priceBoughtAt-input",type:"number",name:"priceBoughtAt",min:0,max:1e9,value:this.state.priceBoughtAt,onChange:this.onValueChange}),r.a.createElement("button",{className:"Portfolio-form-submit"},"Add")))}}]),a}(n.Component),y=(a(46),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.totalValue,t=this.props.gainOrLoss;return t=t.toFixed(2),e=e.toFixed(2),e=g()(e),r.a.createElement("div",{className:"PortfolioValueTab"},r.a.createElement("p",null,"Portfolio Value: $",e),r.a.createElement("p",{className:this.props.gainOrLoss<0?"red":"green"},"Overall +/- ","$".concat(g()(Math.abs(t)))," "))}}]),a}(n.Component)),O=a(11),j=a.n(O),P=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={portfolioProfile:{portfolioList:{},assetPrices:{}},portfolio:[],portfolioTotal:0,gainOrLoss:0},n.renderAssets=n.renderAssets.bind(Object(h.a)(n)),n.makePortfolio=n.makePortfolio.bind(Object(h.a)(n)),n.handleEdit=n.handleEdit.bind(Object(h.a)(n)),n.handleAdd=n.handleAdd.bind(Object(h.a)(n)),n.handleDelete=n.handleDelete.bind(Object(h.a)(n)),n.calculateTotalPrice=n.calculateTotalPrice.bind(Object(h.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({portfolioProfile:this.props.profile});case 2:return e.next=4,this.makePortfolio();case 4:this.calculateTotalPrice();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"makePortfolio",value:function(){var e={},t=0,a=this.state.portfolioProfile.portfolioList,n=this.state.portfolioProfile.assetPrices,r=0;for(var o in a){var s=a[o][0],i=Number(a[o][1]),l=n[o],c=s*l,u=[s,l,c,i,t];e[o]=u,r+=c,t++}this.setState({portfolio:e,portfolioTotal:r})}},{key:"handleEdit",value:function(){var e=Object(c.a)(l.a.mark((function e(t,a,n){var r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r={}).update=[t,Number(a),Number(n)],e.next=4,j.a.patch("".concat("https://financial-portfolio-shabana.herokuapp.com","/users/portfolio/update"),r);case 4:return e.next=6,j.a.get("".concat("https://financial-portfolio-shabana.herokuapp.com","/portfolio"));case 6:o=e.sent,this.setState({portfolioProfile:{portfolioList:o.data.portfolio,assetPrices:o.data.assetPrices}}),this.makePortfolio(),this.calculateTotalPrice();case 10:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"handleAdd",value:function(){var e=Object(c.a)(l.a.mark((function e(t,a,n){var r,o,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.state.portfolio,e.next=3,j.a.post("".concat("https://financial-portfolio-shabana.herokuapp.com","/users/portfolio/get-ticker"),{ticker:t});case 3:return o=e.sent,s=o.data.price*a,r[t]=[a,o.data.price,s,n,Object.keys(r).length],(i={}).ticker=[t,r],console.log(r[t]),e.next=11,j.a.patch("".concat("https://financial-portfolio-shabana.herokuapp.com","/users/portfolio/add"),i);case 11:this.setState({portfolio:r});case 12:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"handleDelete",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a,n,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in a=this.state.portfolio,n="",this.state.portfolio)console.log(a,t),a[r][4]===t&&(n=r,delete a[r]);return this.calculateTotalPrice(),this.setState({portfolio:a}),o={delete:n},e.next=8,j.a.patch("".concat("https://financial-portfolio-shabana.herokuapp.com","/users/portfolio/delete"),o);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"calculateTotalPrice",value:function(){var e=this.state.portfolio,t=0,a=0;for(var n in e)t+=e[n][2],a+=e[n][3]*e[n][0];this.setState({portfolioTotal:t,gainOrLoss:t-a})}},{key:"renderAssets",value:function(){var e=this,t=this.state.portfolio;return Object.keys(t).map((function(a){return r.a.createElement(v,{key:a,id:t[a][4],ticker:a,quantity:t[a][0],price:t[a][1],priceBoughtAt:t[a][3],handleEdit:e.handleEdit,handleDelete:e.handleDelete})}))}},{key:"render",value:function(){return r.a.createElement("div",{id:"wrapper",className:"Portfolio "},r.a.createElement("p",{className:"Portfolio-greeting"},"Hello ",this.props.userName),r.a.createElement("button",{className:"Portfolio-logout",onClick:this.props.logout},"Log Out"),r.a.createElement("h3",null,"Your Portfolio"),r.a.createElement(k,{className:"Portfolio-form",handleAdd:this.handleAdd}),this.renderAssets(),r.a.createElement("br",null),r.a.createElement(y,{totalValue:this.state.portfolioTotal,gainOrLoss:this.state.gainOrLoss}))}}]),a}(n.Component),w=(a(64),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={profile:{portfolioList:{},assetPrices:{}},isLoaded:!1},n.sendInfo=n.sendInfo.bind(Object(h.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({profile:{portfolioList:this.props.user.portfolio,assetPrices:this.props.user.assetPrices},isLoaded:!0});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendInfo",value:function(){var e=Object(c.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),alert(t.target.value);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.isLoaded?r.a.createElement("div",{className:"PortfolioPagebackground-color: grey;-profile"},r.a.createElement(P,{userName:this.props.user.email,profile:this.state.profile,logout:this.props.logout})):r.a.createElement("div",null," Loading... ")}}]),a}(n.Component)),N=(a(65),a(18)),C=a(3),S=(a(66),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={email:"",password1:"",password2:"",emailError:!1,passwordError:!1,signupError:!1,signupCompleted:!1},n.signup=n.signup.bind(Object(h.a)(n)),n.handleChange=n.handleChange.bind(Object(h.a)(n)),n}return Object(p.a)(a,[{key:"signup",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.state.password1!==this.state.password2&&this.setState({passwordError:!0}),a={email:this.state.email,password:this.state.password1,portfolio:{},tokens:{}},e.prev=3,e.next=6,j.a.post("".concat("https://financial-portfolio-shabana.herokuapp.com","/signup"),{params:a});case 6:return e.sent.data.err&&this.setState({emailError:!0}),this.setState({signupCompleted:!0}),e.abrupt("return",r.a.createElement(C.a,{to:"/login"}));case 12:e.prev=12,e.t0=e.catch(3),this.setState({signupError:!0});case 15:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Signup"},r.a.createElement("h3",{className:"Signup-title"},"Sign up"),this.state.passwordError?r.a.createElement("p",{className:"error"},"Password don't match"):"",this.state.emailError?r.a.createElement("p",{className:"error"},"An account with email already exists"):"",this.state.signupError?r.a.createElement("p",{className:"error"},"Something went wrong"):"",!this.state.signupCompleted||this.state.signupError||this.state.emailError||this.state.passwordError?"":r.a.createElement("p",{className:"success"},"Thank you for signing up! "),r.a.createElement("form",{className:"Signup-form",onSubmit:this.signup},r.a.createElement("label",{className:"Signup-label",htmlFor:"email"}),r.a.createElement("input",{className:"Signup-input",name:"email",type:"email",placeholder:"Email",value:this.state.email,onChange:this.handleChange}),r.a.createElement("label",{className:"Signup-label",htmlFor:"password"}),r.a.createElement("input",{className:"Signup-input",name:"password1",type:"password",placeholder:"Password",value:this.state.password1,onChange:this.handleChange}),r.a.createElement("label",{className:"Signup-label",htmlFor:"password"}),r.a.createElement("input",{className:"Signup-input",name:"password2",type:"password",placeholder:"Retype your Password",value:this.state.password2,onChange:this.handleChange}),r.a.createElement("button",{className:"Signup-button"},"Sign up")))}}]),a}(n.Component)),x=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={email:"",password:"",isInvalid:!1},n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n}return Object(p.a)(a,[{key:"handleSubmit",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={email:this.state.email,password:this.state.password},e.next=4,j.a.post("".concat("https://financial-portfolio-shabana.herokuapp.com","/login"),{params:a});case 4:""!==(n=e.sent).data?this.props.login(n.data):this.setState({isInvalid:!0});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Login"},r.a.createElement("h3",{className:"Login-title"},"Portfolio"),this.state.isInvalid?r.a.createElement("p",{className:"red"}," Invalid login "):"",r.a.createElement("form",{className:"Login-form",onSubmit:this.handleSubmit},r.a.createElement("label",{className:"Login-label",htmlFor:"email"}),r.a.createElement("input",{className:"Login-input",name:"email",type:"email",placeholder:"Email",value:this.state.email,onChange:this.handleChange}),r.a.createElement("label",{className:"Login-label",htmlFor:"password"}),r.a.createElement("input",{className:"Login-input",name:"password",type:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange}),r.a.createElement("button",{className:"Login-button"},"Login"),r.a.createElement(N.b,{exact:!0,to:"/signup"}," ","Sign Up"," ")),r.a.createElement(C.d,null,r.a.createElement(C.b,{exact:!0,path:"/signup",render:function(){return r.a.createElement(S,null)}}),r.a.createElement(C.b,{exact:!0,path:"/portfolio",render:function(){return r.a.createElement(w,{logout:e.logout,user:e.state.user})}})))}}]),a}(n.Component),A=(a(72),a(20)),T=a.n(A),M=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={user:{},loggedIn:!1},n.login=n.login.bind(Object(h.a)(n)),n.logout=n.logout.bind(Object(h.a)(n)),n.playground=n.playground.bind(Object(h.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.get("".concat("https://financial-portfolio-shabana.herokuapp.com","/portfolio"));case 3:t=e.sent,console.log(t.data),this.setState({loggedIn:!0,user:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Not logined in");case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T.a.set("token",t.token,{expires:7}),T.a.set("id",t.id,{expires:7}),e.prev=2,e.next=5,j.a.get("".concat("https://financial-portfolio-shabana.herokuapp.com","/portfolio"));case 5:(a=e.sent).status<400&&this.setState({user:a.data,loggedIn:!0}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("Error getting your profile");case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){this.setState({loggedIn:!1}),T.a.remove("token"),T.a.remove("id"),window.location.reload()}},{key:"playground",value:function(){alert("This is playground mode, any changes you make won't be saved. Make an account if you'd like this app to remember your assets."),this.setState({loggedIn:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"wrapper"},this.state.loggedIn&&this.state.user!=={}?r.a.createElement(C.a,{to:"/portfolio"}):r.a.createElement(C.a,{to:"/"}),this.state.loggedIn?"":r.a.createElement("button",{onClick:this.playground},"Test the app"),r.a.createElement(C.d,null,r.a.createElement(C.b,{exact:!0,path:"/",render:function(){return r.a.createElement(x,{login:e.login})}}),r.a.createElement(C.b,{exact:!0,path:"/portfolio",render:function(){return r.a.createElement(w,{logout:e.logout,user:e.state.user})}}),r.a.createElement(C.b,{exact:!0,path:"/signup",render:function(){return r.a.createElement(S,null)}})))}}]),a}(n.Component);s.a.render(r.a.createElement(N.a,null,r.a.createElement(M,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.eae2d889.chunk.js.map